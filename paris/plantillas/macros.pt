<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal">
<head>
    <title>Macros</title>
</head>
<body>
	
	<!-- Inventario tienda
	================================================== -->	
	<metal:inventario_tienda define-macro="inventario_tienda">
	    <ul class="thumbnails">
        	<li class="span2" tal:repeat="item view.inventario_reciente">
        		<div tal:define="enlace view.peticion.route_url('producto', producto_id = item.producto_id)">
        			<a href="${enlace}">
        				<div class="thumbnail">
        					<img tal:define="foto view.obtener_foto('producto', item.producto_id, 'pequenas')" src="/estatico/${foto.ruta_de_foto}" alt="producto.nombre" />
        				</div>
        			</a>
        			<div class="caption" tal:define="producto view.obtener_producto(item.producto_id)">
						<a href="${enlace}">
							<h5>${producto.nombre}</h5>
						</a>
						<p>
							<em>${producto.codigo}</em><br />
							${item.descripcion}<br />
							<strong>Categoria</strong> <span tal:define="categoria_item view.obtener_categoria(producto.categoria)">${categoria_item.nombre}</span><br />
							<strong>SKU</strong> ${item.codigo}<br />
							<strong>Precio</strong> ${item.precio}<br />
							<strong>Cantidad</strong> ${item.cantidad}
						</p>
					</div>
	           	</div>
	        </li>
        </ul>
	</metal:inventario_tienda>
	
	<!-- Inventario producto
	================================================== -->	
	<metal:inventario_producto define-macro="inventario_producto">
	   <ul class="thumbnails">
        	<li class="span2" tal:repeat="item view.inventario_reciente">
        		<div tal:define="enlace view.peticion.route_url('tienda', tienda_id = item.tienda_id)">
        			<a href="${enlace}">
        				<div class="thumbnail">
        					<img tal:define="foto view.obtener_foto('tienda', item.tienda_id, 'pequenas')" src="/estatico/${foto.ruta_de_foto}" alt="cliente.nombre_comun" />
        				</div>
        			</a>
        			<div class="caption" tal:define="cliente view.obtener_cliente_padre('tienda', item.tienda_id)">
						<a href="${enlace}">
							<h5>${cliente.nombre_comun}</h5>	
						</a>
						<p tal:define="tienda view.obtener_tienda(item.tienda_id)">
							${cliente.nombre_legal}
							<span class="label label-success" tal:condition="tienda.abierto">Abierta</span>
							<span class="label label-important" tal:condition="not tienda.abierto">Cerrada</span>
							<br />
							<em>${cliente.rif}</em><br />
							<strong>Categoria</strong> <span tal:define="categoria_item view.obtener_categoria(cliente.categoria)">${categoria_item.nombre}</span><br />					
							<strong>Precio</strong> ${item.precio}<br />
							<strong>Cantidad</strong> ${item.cantidad}
							<input type="hidden" name="tienda_id" value="${tienda.tienda_id}" />
						</p>
					</div>
	           	</div>
	        </li>
        </ul>
	</metal:inventario_producto>
	
	<!-- Comentarios (calificaciones y reseÃ±as)
	================================================== -->	
	<metal:comentarios define-macro="comentarios">
		<blockquote tal:repeat="comentario view.calificaciones_resenas">
			<p>${comentario.resena}</p>
			<small>
				${comentario.consumidor.nombre} ${comentario.consumidor.apellido} el ${comentario.fecha}
				<tal:block tal:switch="comentario.calificacion">
					<span tal:case="'Bien'"><i class="icon-thumbs-up"></i></span>
					<span tal:case="'Mal'"><i class="icon-thumbs-down"></i></span>									
    			</tal:block>
			</small>
		</blockquote>
	</metal:comentarios>
	
	<!-- Fotos
	================================================== -->	
	<metal:fotos_medianas define-macro="fotos_medianas">
		<div id="carrusel" class="carousel slide">
            <div class="carousel-inner">
            	<tal:block tal:repeat="foto view.fotos_medianas">
           			<div tal:condition="repeat.foto.start" class="item active">
        				<div class="thumbnail">
        					<img src="/estatico/${foto.ruta_de_foto}" alt="Foto" />
        				</div>
        			</div>
        			<div tal:condition="not repeat.foto.start" class="item">
        				<div class="thumbnail">
        					<img src="/estatico/${foto.ruta_de_foto}" alt="Foto" />
        				</div>
        			</div>
            	</tal:block>
			</div>
			<tal:block tal:condition="python:len(view.fotos_medianas) > 1">
	        	<a class="left carousel-control" href="#carrusel" data-slide="prev">&lsaquo;</a>
	        	<a class="right carousel-control" href="#carrusel" data-slide="next">&rsaquo;</a>
        	</tal:block>
        </div>
	</metal:fotos_medianas>
	
	<!-- Ruta de categoria
	================================================== -->	
	<metal:ruta_de_categoria define-macro="ruta_de_categoria">
		<ul id="ruta_de_categoria" class="breadcrumb">
			<li tal:repeat="nodo view.ruta_categoria_actual">
		    	<a href="#">${nodo.nombre}</a> <span class="divider">/</span>
		  	</li>
		  	<li tal:condition="pagina == 'Producto'" class="active">${producto.fabricante} ${producto.nombre}</li>
		  	<li tal:condition="pagina == 'Tienda'" class="active">${cliente.nombre_comun}</li>
		</ul>
	</metal:ruta_de_categoria>
	
	<!-- Enlace de categoria
	================================================== -->	
	<metal:enlace_categoria define-macro="enlace_categoria">
		<a tal:condition="pagina == 'Productos'" tal:attributes="href view.peticion.route_url('productos', categoria_id = categoria.categoria_id, region_geografica_id = view.region_geografica_id)">${categoria.nombre}</a>
		<a tal:condition="pagina == 'Tiendas'" tal:attributes="href view.peticion.route_url('tiendas', categoria_id = categoria.categoria_id, region_geografica_id = view.region_geografica_id)">${categoria.nombre}</a>
	</metal:enlace_categoria>
	
	<!-- Enlace de ubicacion
	================================================== -->	
	<metal:enlace_ubicacion define-macro="enlace_ubicacion">
		<a tal:condition="pagina == 'Productos'" tal:attributes="href view.peticion.route_url('productos', categoria_id = view.categoria_id, region_geografica_id = region.region_geografica_id)">${region.nombre}</a>
		<a tal:condition="pagina == 'Tiendas'" tal:attributes="href view.peticion.route_url('tiendas', categoria_id = view.categoria_id, region_geografica_id = region.region_geografica_id)">${region.nombre}</a>
	</metal:enlace_ubicacion>
</body>
</html>